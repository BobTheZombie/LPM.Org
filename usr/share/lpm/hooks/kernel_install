#!/usr/bin/env python3
import os
import sys
from pathlib import Path


def main() -> None:
    base = Path(__file__).resolve()
    candidates = [
        base.parents[3] / "libexec" / "lpm" / "hooks" / "kernel-install",
        Path("/usr/libexec/lpm/hooks/kernel-install"),
    ]
    for candidate in candidates:
        if candidate.exists():
            os.execv(str(candidate), [str(candidate), *sys.argv[1:]])
    raise FileNotFoundError("kernel-install helper not found in libexec")


if __name__ == "__main__":
    main()
